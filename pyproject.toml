[build-system]
requires = [
    'flit_core >=2,<4',
    'setuptools_scm',
    'pytoml',
    'importlib_metadata>=0.7; python_version < "3.8"',
]
build-backend = 'flit_core.buildapi'

[tool.flit.metadata]
module = 'anndata'
author = 'Philipp Angerer, Alex Wolf, Isaac Virshup, Sergei Rybakov'
# We donâ€™t need all emails, the main authors are sufficient.
author-email = 'phil.angerer@gmail.com, f.alex.wolf@gmx.de'
description-file = 'README.rst'
home-page = 'http://github.com/theislab/anndata'
classifiers = [
    'License :: OSI Approved :: BSD License',
    'Environment :: Console',
    'Framework :: Jupyter',
    'Intended Audience :: Developers',
    'Intended Audience :: Science/Research',
    'Natural Language :: English',
    'Operating System :: MacOS :: MacOS X',
    'Operating System :: Microsoft :: Windows',
    'Operating System :: POSIX :: Linux',
    'Programming Language :: Python :: 3',
    'Programming Language :: Python :: 3.6',
    'Programming Language :: Python :: 3.7',
    'Topic :: Scientific/Engineering :: Bio-Informatics',
    'Topic :: Scientific/Engineering :: Visualization',
]
requires-python = '>=3.6'
requires = [
    # pandas 1.1 breaks tests, https://github.com/pandas-dev/pandas/issues/35446
    'pandas>=1.0,<1.1',
    'numpy>=1.15',
    'scipy~=1.0',
    'h5py',
    'natsort',
    'packaging',
    'setuptools_scm',
    'pytoml',
    'importlib_metadata>=0.7; python_version < "3.8"',
]

[tool.flit.metadata.requires-extra]
doc = [
    # Sphinx 2 has nicer looking sections
    'sphinx>=2.0.1',
    'sphinx-rtd-theme',
    'sphinx-autodoc-typehints>=1.11.0',
    'sphinx_issues',
    'scanpydoc>=0.5',
    'typing_extensions; python_version < "3.8"',
]
test = [
    'loompy>=3.0.5',
    'pytest>=6.0',
    'pytest-cov>=2.10',
    'codacy-coverage',
    'docutils',  # for rst2html.py
    'zarr',
    'matplotlib',
    'sklearn',
    'xlrd',
    'joblib',
    'black',
    'boltons',
    'scanpy',
]

[tool.flit.metadata.urls]
Documentation = 'https://anndata.readthedocs.io/'

[tool.flit.sdist]
exclude = ['anndata/tests']

[tool.pytest.ini_options]
addopts = '--doctest-modules'
python_files = 'test_*.py'
testpaths = ['anndata', 'docs/concatenation.rst']
xfail_strict = true

[tool.black]
line-length = 88
target-version = ['py36']
exclude = '^/build/.*$'
